---
layout:     	post
title:      	C/Cpp Notes and Summary
categories: 	C/CPP
description:   	C/CPPçŸ¥è¯†ç‚¹æ€»ç»“(to be continued)
keywords: 		C/CPP
---

ä»è°­è€å¸ˆçš„ã€Šcè¯­è¨€ç¨‹åºè®¾è®¡ã€‹åˆ°APUE,  ä»C++ Primerèµ°å‘ä½•æ–¹

# static å…¨å±€å˜é‡vsæ™®é€šçš„å…¨å±€å˜é‡

-  static å…¨å±€å˜é‡åªåˆä½¿åŒ–ä¸€æ¬¡ï¼Œé˜²æ­¢åœ¨å…¶ä»–æ–‡ä»¶å•å…ƒä¸­è¢«å¼•ç”¨;    static å±€éƒ¨å˜é‡å’Œæ™®é€šå±€éƒ¨å˜é‡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼š 	static å±€éƒ¨å˜é‡åªè¢«åˆå§‹åŒ–ä¸€æ¬¡ï¼Œä¸‹ä¸€æ¬¡ä¾æ®ä¸Šä¸€æ¬¡ç»“æœå€¼ï¼›    static å‡½æ•°ä¸æ™®é€šå‡½æ•°æœ‰ä»€ä¹ˆåŒºåˆ«ï¼š 			static å‡½æ•°åœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä»½ï¼Œæ™®é€šå‡½æ•°åœ¨æ¯ä¸ªè¢«è°ƒç”¨ä¸­ç»´æŒä¸€ä»½æ‹·è´

- ç¨‹åºçš„å±€éƒ¨å˜é‡å­˜åœ¨äºï¼ˆå †æ ˆï¼‰ä¸­ï¼Œå…¨å±€å˜é‡å­˜åœ¨äºï¼ˆé™æ€åŒº ï¼‰ä¸­ï¼ŒåŠ¨æ€ç”³è¯·æ•°æ®å­˜åœ¨äºï¼ˆ å †ï¼‰ä¸­
  
  å®Œæ•´çš„è¯´æ˜ï¼Œ è¯·é˜…è¯»[staticä½œç”¨ï¼ˆä¿®é¥°å‡½æ•°ã€å±€éƒ¨å˜é‡ã€å…¨å±€å˜é‡ï¼‰](https://www.cnblogs.com/stoneJin/archive/2011/09/21/2183313.html)

# sizeof vs strlen

- Sizeof operator is a compile time unary operator(å•ç›®è¿ç®—ç¬¦) which can be used to compute the size of its operand.The result of sizeof is of unsigned integral type which is usually denoted by size_t.
  sizeof can be applied to any data-type, including primitive types such as integer and floating-point types, pointer types, or compound datatypes such as Structure, union etc.
- strlen(): strlen() is a predefined function in C whose definition is contained in the header file â€œstring.hâ€.

# ä¸€ä¸ªé¢‘ç¹ä½¿ç”¨çš„çŸ­å°å‡½æ•°çš„å®ç°

- c ç”¨å®å®šä¹‰
- c++ç”¨ inline 

# å¤šç»´æ•°ç»„çš„å­˜å‚¨

```c
int a[60][250][1000],i,j,k;
for(k=0;k<=1000;k++)
	for(j=0;j<250;j++)
		for(i=0;i<60;i++)
			a[i][j][k]=0;
```


éœ€è¦æŠŠå¾ªç¯è¯­å¥å†…å¤–æ¢ä¸€ä¸‹

# macro functions

 [å®å‡½æ•°è¯¦è§£](https://stackoverflow.com/questions/14662815/define-squarex-xx)

```c
#include <stdio.h>
#define Square(x) ({ typeof (x) _x = (x); _x * _x; })
#define SQUARE(a)((a)*(a))*

int main() {
    int x = 5;
    printf("%d\n", Square(x++));
    printf("x now is %d!\n", x);
    printf("%d\n", SQUARE(x++));
    return 0;
}
```

# byte å’Œåå…­è¿›åˆ¶

4ä¸ªbit(8 4 2 1)å¯ä»¥ç”¨1ä½16è¿›åˆ¶çš„æ•°æ¥è¡¨ç¤ºï¼Œ æ‰€ä»¥1ä¸ªå­—èŠ‚byteéœ€ç”¨ä¸¤ä½16è¿›åˆ¶æ•°æ¥è¡¨ç¤º

# æ ¼å¼åŒ–è¾“å‡º

%5.2s ï¼š%5.2sä¸­5è¡¨ç¤ºæ˜¾ç¤ºçš„æœ€å°å®½åº¦ï¼Œ2è¡¨ç¤ºç²¾åº¦abideåªæ˜¾ç¤ºå‰ä¸¤ä¸ª

# Linux C system å‡½æ•°

> system() executes a command specified in command by calling /bin/sh -c command, and returns after the command has been completed. During execution of the command, `SIGCHLD` will be blocked, and `SIGINT` and `SIGQUIT` will be ignored. 

system fork shell, shell forkå‡ºcommandç¨‹åºï¼Œ éœ€è¦æ³¨æ„éšå¼ç«¯å£å ç”¨é—®é¢˜

# ç¦ç”¨å†™æ–‡ä»¶ç¼“å­˜

  `setbuf(fp, NULL);` è°ƒè¯•æ—¶å‘ç°æ—¥å¿—æœªè¢«è¾“å‡ºå¯ä»¥ä½¿ç”¨

# å¥‡æ€ªçš„å†™æ³•

`#if 0 stmt1; #else stmt2; #endif`ä¸­stmt1æ˜¯ç›¸å½“äºè¢«æ³¨é‡Šæ‰çš„

- C++ä½¿ç”¨newæ¥å£°æ˜å¯¹è±¡æ—¶éœ€è¦ä½¿ç”¨ç±»æŒ‡é’ˆæ¥æ¥æ”¶(new æ˜¯åœ¨ä¸ºç±»ç”³è¯·å†…å­˜ï¼Œ æ‰€ä»¥éœ€è¦ç±»æŒ‡é’ˆæ¥æ¥æ”¶)ï¼Œè¿™ä¸€ç‚¹å’ŒC#, JAVAä¸åŒï¼Œéœ€è¦æ³¨æ„ä¸‹ï¼Œ å¦å¤–ä¹Ÿéœ€è¦è®°å¾—ç”¨deleteæ¥ä½¿å¾—ææ„å‡½æ•°æ‰§è¡Œã€‚è‹¥ä¸éœ€è¦å¯ç›´æ¥ä½¿ç”¨OBJECT obj(1,2,3)è¿™ç§æ–¹å¼è¿›è¡Œå¯¹è±¡çš„å£°æ˜

- ç”¨typedef å®šä¹‰ä¸€ä¸ªåŒ…å«10ä¸ªæ•´å‹çš„ç±»å‹ã€‚

  æ³¨ï¼štypedef int NUMBER[10];
  NUMBER å£°æ˜ä¸ºå«æœ‰10ä¸ªå…ƒç´ çš„æ•°ç»„ç±»å‹ã€‚
  NUMBER n;
  n[0] =1;
  nä¸ºå«æœ‰10ä¸ªå…ƒç´ çš„æ•°ç»„ã€‚

# c keyword

- **union(è”åˆ)**: 

  è®°å¾—è‡ªå·±å½“æ—¶é¢è¯•æ—¶ä¸€é“unionç±»å‹å¤§å°çš„é—®é¢˜åšé”™äº†ğŸ˜‚ 

  - what is union:

    A **union** is a special data type available in C that allows to store different data types in the same memory location. You can define a union with many members, but only one member can contain a value at any given time. Unions provide an efficient way of using the same memory location for multiple-purpose. [c_unions](https://www.tutorialspoint.com/cprogramming/c_unions.htm)

    ```c
    union Data {
       int i;
       float f;
       char str[20];
    } data;  
    ```

  -  **è”åˆä¸ç»“æ„çš„åŒºåˆ«**
    â€œè”åˆâ€ä¸â€œç»“æ„â€æœ‰ä¸€äº›ç›¸ä¼¼ä¹‹å¤„ã€‚ä½†ä¸¤è€…æœ‰æœ¬è´¨ä¸Šçš„ä¸åŒã€‚åœ¨ç»“æ„ä¸­å„æˆå‘˜æœ‰å„è‡ªçš„å†…å­˜ç©ºé—´ï¼Œ ä¸€ä¸ªç»“æ„å˜é‡çš„æ€»é•¿åº¦æ˜¯å„æˆå‘˜é•¿åº¦ä¹‹å’Œï¼ˆç©ºç»“æ„é™¤å¤–ï¼ŒåŒæ—¶ä¸è€ƒè™‘è¾¹ç•Œè°ƒæ•´ï¼‰ã€‚è€Œåœ¨â€œè”åˆâ€ä¸­ï¼Œå„æˆå‘˜å…±äº«ä¸€æ®µå†…å­˜ç©ºé—´ï¼Œ ä¸€ä¸ªè”åˆå˜é‡çš„é•¿åº¦ç­‰äºå„æˆå‘˜ä¸­æœ€é•¿çš„é•¿åº¦ã€‚åº”è¯¥è¯´æ˜çš„æ˜¯ï¼Œ è¿™é‡Œæ‰€è°“çš„å…±äº«ä¸æ˜¯æŒ‡æŠŠå¤šä¸ªæˆå‘˜åŒæ—¶è£…å…¥ä¸€ä¸ªè”åˆå˜é‡å†…ï¼Œ è€Œæ˜¯æŒ‡è¯¥è”åˆå˜é‡å¯è¢«èµ‹äºˆä»»ä¸€æˆå‘˜å€¼ï¼Œ**ä½†æ¯æ¬¡åªèƒ½èµ‹ä¸€ç§å€¼ï¼Œ èµ‹å…¥æ–°å€¼åˆ™å†²å»æ—§å€¼ã€‚** [sizeof(struct) and sizeof(union)](https://stackoverflow.com/questions/22844542/sizeofstruct-and-sizeofunion)

# cpp keyword

- auto & decltype(**to be contiued**): 

  > Type Inference refers to automatic deduction of the data type of an expression in a programming language. Before C++ 11, each data type needs to be explicitly declared at compile time, limiting the values of an expression at runtime but after the new version of C++, many keywords are included which allows a programmer to leave the type deduction to the compiler itself.
  > With type inference capabilities, we can spend less time having to write out things compiler already knows. As all the types are deduced in compiler phase only, the time for compilation increases slightly but it does not affect the run time of the program.

ä¸ç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹, since C++ 11, è¿™ä¸ªå’ŒC#çš„`var`ä¼¼ä¹ç”¨æ³•å·®ä¸å¤š

# Error & Debug 

- **xxx has initializer but incomplete type** / **class does not name a type**

  type was not defined, less of **header**

- == å’Œ= æé”™äº†ï¼Œ if(a=2) , èµ‹å€¼è¿ç®—çš„å€¼ä¸ºæœ€ç»ˆçš„å·¦å€¼

- errnoåº”è¯¥å»æŸ¥è¾“å‡ºå‰æ‰€è°ƒç”¨çš„å‡½æ•°æ˜¯ä»€ä¹ˆï¼Œ å»çœ‹å‡½æ•°çš„man page

  è°ƒç”¨ä¸€äº›å‡½æ•°åï¼Œæœ€å¥½è¾“å‡ºè¿”å›å€¼å’Œerrno, errnoå€¼çš„å…·ä½“å«ä¹‰å«ä¹‰å¯ä»¥å»æœä¹‹å‰æ‰€è°ƒç”¨å‡½æ•°æˆ–è€…ç›´æ¥google, /usr/include/errno.h, man errno ç­‰æ–¹å¼äº†è§£

  é”™è¯¯è¾“å‡ºï¼Œ strerror(errno)

- è¿›ç¨‹å¡ä½ä¸åŠ¨æˆ–è€…CPUå ç”¨å¤ªé«˜ï¼Œå¯èƒ½æ˜¯è¿›å…¥äº†æ­»å¾ªç¯æˆ–è€…ç­‰å¾…äº‹ä»¶ï¼ˆé˜»å¡ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨`gstack`æˆ–è€…`pstack`æŸ¥çœ‹, linux å¯ä»¥å°è¯•ä½¿ç”¨ `sudo strace -p  pid`

- ä½¿ç”¨`gettimeofday` æŠ¥é”™ï¼Œ å­˜å‚¨å¤§å°æœªçŸ¥å¤šåŠæ˜¯æ²¡æœ‰å¤´æ–‡ä»¶ï¼Œå†æˆ–è€…å°±æ˜¯ç»“æ„ä½“çš„åå­—å†™

- **C++**: Cannot declare member function ...to have static linkage

  æš‚æ—¶åªæ˜¯ç†è§£æ˜¯è¯´å¤´æ–‡ä»¶é‡Œfunctionå®šä¹‰äº†staticåï¼Œfunctionå®ç°æ—¶ä¸éœ€è¦åŠ ï¼Œ éœ€è¦è¿›ä¸€æ­¥ç¡®è®¤

  [è§£é‡Š1](<https://www.badprog.com/c-errors-warnings-cannot-declare-member-function-static-void-myclassmymethod-to-have-static-linkage>) ï¼Œ [è§£é‡Š2](https://blog.csdn.net/guoxiaojie_415/article/details/5364354)ï¼Œ [è§£é‡Š3](https://ask.helplib.com/c++/post_1329112)

- Undefined reference to static variable c++ï¼š

  é™æ€æˆå‘˜å˜é‡æ˜¯å±äºæ•´ä¸ªç±»çš„ï¼Œæ•´ä¸ªç±»(æ‰€æœ‰ç±»çš„å¯¹è±¡ä¸­)åªæœ‰ä¸€ä»½æ‹·è´,ç›¸å½“äºç±»çš„å…¨å±€å˜é‡(è¿™æ˜¯å¯¹äºåŒä¸€è¿›ç¨‹å†…è€Œè¨€, å¤šè¿›ç¨‹é—´æ— æ•ˆ)ã€‚

  é™æ€æˆå‘˜å˜é‡ä¸èƒ½åœ¨ç±»çš„å†…éƒ¨åˆå§‹åŒ–ï¼Œåœ¨ç±»çš„å†…éƒ¨åªæ˜¯å£°æ˜ï¼Œå®šä¹‰å¿…é¡»åœ¨ç±»å¤–,å®šä¹‰æ—¶ä¸èƒ½åŠ ä¸Šstaticå…³é”®å­—ã€‚

  [ç±»çš„æˆå‘˜å˜é‡](https://www.cnblogs.com/LubinLew/p/Cpp-ClassMember.html)
- `strtok`  see man page,  `strtok(line, search)ï¼Œ  token = strtok(NULL, search);` åœ¨`search` è¢«æ‰¾åˆ°çš„æƒ…å†µä¸‹éƒ½ä¸ä¼šæ˜¯åŸæœ¬åˆ†å‰²å‰çš„`line`

# å­è¿›ç¨‹å…±äº«çˆ¶è¿›ç¨‹SOCKETå¼•å‘çš„é—®é¢˜ 

 		åœ¨è°ƒç”¨äº†bindç»‘å®šå¥—æ¥å­—ä¸åœ°å€çš„serverç¨‹åºä¸­è°ƒç”¨systemæ‰§è¡Œcommandæ—¶ï¼Œ ä¼š`fork`å‡º `sh -c`, è¿›è€Œ`fork`å‡º command, è¿™ä¸¤ä¸ªç¨‹åºéƒ½ä¹Ÿå°†**å…±äº«çˆ¶è¿›ç¨‹socketçš„ç»‘å®šå…³ç³»**ï¼Œ è‹¥command å‘½ä»¤æœªèƒ½æ‰§è¡Œç»“æŸï¼Œ è€Œserverç¨‹åºéœ€è¦å†æ¬¡bind

ç«¯å£æ—¶ï¼Œ å°±ä¼šæŠ¥ address already in use çš„é—®é¢˜ï¼Œ [é—®é¢˜åˆ†æ](https://answerwa.github.io/2017/08/30/%E8%AE%B0%E4%B8%80%E6%AC%A1%20system()%20%E5%BC%95%E8%B5%B7%E7%9A%84%E7%AB%AF%E5%8F%A3%E6%8A%A2%E5%8D%A0/)

# strcpyæ—¶æœªå¯¹NULL æŒ‡é’ˆåšåˆ¤æ–­å¯¼è‡´ç¨‹åºcore dump

- äº‹æ•…èƒŒæ™¯ï¼š

  - æŸä¸ªkafka clientåœ¨æ¶ˆè´¹æ¶ˆæ¯æ—¶é‡‡å–äº†å¤„ç†å®Œå†commitçš„æœºåˆ¶ï¼Œ ä½†å¤„ç†æ¶ˆæ¯æ—¶æŸä¸€æ®µstrcpy æœªå¯¹NULLæŒ‡é’ˆåšåˆ¤æ–­ï¼Œ å¯¼è‡´æ¶ˆæ¯æŒç»­è¢«æ¶ˆè´¹ï¼Œ ç¨‹åºæŒç»­crash

- strcpy æˆ–å…¶ä»–å‡½æ•°å¤„ç†NULLæŒ‡é’ˆçš„æ–¹æ¡ˆ:

  - é¡¹ç›®ä¸­, `strcpy`, `strnpcy`, `printf`, `fprintf`, `fclose`å¯ä»¥å¯¹NULL pointeråšåˆ¤æ–­ï¼Œ å¯å°è£…ç›¸åº”å‡½æ•°ï¼ˆæ³¨æ„ä»¥ä¸‹`printf`, `strcpy`åœ¨æŸäº›å¹³å°ï¼Œ æŸäº›ç¼–è¯‘å™¨ä¸Šå¯èƒ½ä¼šå¼•å‘core dumpï¼‰

    ```c
    char *str = NULL;
    char str2[20] = {0};
    printf("str is %s\n", str);//linux, gcc ä¸Šæœªcrasshï¼Œ è¾“å‡º(null)
    strcpy(str2, str);//linux, gcc ä¸Šcrassh
    printf("str2 is %s\n", str2);
    fp = fopen("unexist file or no permission", "r");
    fclose(fp);//linux, gcc ä¸Šcrassh
    ```

# malloc, free, new delete

æ³¨æ„ï¼š ä½¿ç”¨mallocæˆ–newç”³è¯·çš„å†…å­˜éœ€è¦æ­£ç¡®ä½¿ç”¨freeæˆ–è€…deleteæ¥é‡Šæ”¾ï¼Œ åœ¨é‡Šæ”¾åæœ€å¥½å°†ç›¸åº”æŒ‡é’ˆèµ‹å€¼ä¸ºNULLï¼Œä¸€æ–¹é¢å¯ä»¥åœ¨é‡Šæ”¾å‰åšåˆ¤æ–­é¿å…double freeçš„é—®é¢˜ï¼Œ å¦ä¸€æ–¹é¢ä¹Ÿé¿å…ç¨‹åºå†æ¬¡è®¿é—®åˆ°é‡æŒ‡é’ˆä¸­çš„å†…å®¹ã€‚

ä»Šå¤©å·²ç»å‘ç°äº†å½“æŒ‡é’ˆè¢«é‡Šæ”¾åï¼Œ åç»­å£°æ˜çš„æŒ‡é’ˆåœ°å€åˆšå¥½å’ŒåŸæœ‰çš„åœ°å€ä¸€æ ·çš„ç°è±¡ï¼Œç½®ä¸ºNULLå°±å¯ä»¥é¿å…è¿™ç§

è®¿é—®é‡æŒ‡é’ˆçš„è¡Œä¸ºã€‚



```cpp
int *p = (int *) malloc(sizeof(int) * length);
free(p)
int *p1 = new int;     
delete p1;
int *p2 = new int(3);  
delete [] p2;
```
# å…³äºæŒ‡é’ˆ

from [Cè¯­è¨€æŒ‡é’ˆè¯¦è§£(ç»å…¸,éå¸¸è¯¦ç»†)](https://blog.csdn.net/constantin_/article/details/79575638)

ä¹Ÿå¯ä»¥é˜…è¯»[è¯»æ‡‚å¤æ‚Cå£°æ˜çš„é»„é‡‘æ³•åˆ™](https://www.cnblogs.com/jiqingwu/p/4043369.html)

[c++ æ™ºèƒ½æŒ‡é’ˆ](https://www.cnblogs.com/TenosDoIt/p/3456704.html)è¿™ä¸ªä¹Ÿå¯ä»¥äº†è§£ä¸‹

å¤æ‚æŒ‡é’ˆç±»å‹ï¼š è¯´æ˜ï¼Œ ç¬¬ä¸€æ¬¡çœ‹åˆ°æœ‰æ–‡ç« ç³»ç»Ÿæ€§çš„å°†å‡ ä¹æ‰€æœ‰å¸¸è§çš„æŒ‡é’ˆç±»å‹éƒ½åˆ†æäº†ä¸€éï¼Œ æ›´å…³é”®çš„æ˜¯é˜æ˜äº†è¿™ä¸ªéœ€è¦å€ŸåŠ©è¿ç®—ç¬¦ä¼˜å…ˆçº§æ¥åˆ†æã€‚

| []   | æ•°ç»„ä¸‹æ ‡   | æ•°ç»„å[å¸¸é‡è¡¨è¾¾å¼]        | ->   |
| ---- | ---------- | ------------------------- | ---- |
| ()   | åœ†æ‹¬å·     | ï¼ˆè¡¨è¾¾å¼ï¼‰/å‡½æ•°å(å½¢å‚è¡¨) | ->   |
| *    | å–å€¼è¿ç®—ç¬¦ | *æŒ‡é’ˆå˜é‡                 | <-   |

```
int p; //è¿™æ˜¯ä¸€ä¸ªæ™®é€šçš„æ•´å‹å˜é‡  
int *p; //é¦–å…ˆä»P å¤„å¼€å§‹,å…ˆä¸*ç»“åˆ,æ‰€ä»¥è¯´æ˜P æ˜¯ä¸€ä¸ªæŒ‡é’ˆ,ç„¶åå†ä¸int ç»“åˆ,è¯´æ˜æŒ‡é’ˆæ‰€æŒ‡å‘çš„å†…å®¹çš„ç±»å‹ä¸ºint å‹.æ‰€ä»¥Pæ˜¯ä¸€ä¸ªè¿”å›æ•´å‹æ•°æ®çš„æŒ‡é’ˆ  
int p[3]; //é¦–å…ˆä»P å¤„å¼€å§‹,å…ˆä¸[]ç»“åˆ,è¯´æ˜P æ˜¯ä¸€ä¸ªæ•°ç»„,ç„¶åä¸int ç»“åˆ,è¯´æ˜æ•°ç»„é‡Œçš„å…ƒç´ æ˜¯æ•´å‹çš„,æ‰€ä»¥P æ˜¯ä¸€ä¸ªç”±æ•´å‹æ•°æ®ç»„æˆçš„æ•°ç»„  
int *p[3]; //é¦–å…ˆä»P å¤„å¼€å§‹,å…ˆä¸[]ç»“åˆ,å› ä¸ºå…¶ä¼˜å…ˆçº§æ¯”*é«˜,æ‰€ä»¥P æ˜¯ä¸€ä¸ªæ•°ç»„,ç„¶åå†ä¸*ç»“åˆ,è¯´æ˜æ•°ç»„é‡Œçš„å…ƒç´ æ˜¯æŒ‡é’ˆç±»å‹,ç„¶åå†ä¸int ç»“åˆ,è¯´æ˜æŒ‡é’ˆæ‰€æŒ‡å‘çš„å†…å®¹çš„ç±»å‹æ˜¯æ•´å‹çš„,æ‰€ä»¥P æ˜¯ä¸€ä¸ªç”±è¿”å›æ•´å‹æ•°æ®çš„æŒ‡é’ˆæ‰€ç»„æˆçš„æ•°ç»„  
int (*p)[3]; //é¦–å…ˆä»P å¤„å¼€å§‹,å…ˆä¸*ç»“åˆ,è¯´æ˜P æ˜¯ä¸€ä¸ªæŒ‡é’ˆç„¶åå†ä¸[]ç»“åˆ(ä¸"()"è¿™æ­¥å¯ä»¥å¿½ç•¥,åªæ˜¯ä¸ºäº†æ”¹å˜ä¼˜å…ˆçº§),è¯´æ˜æŒ‡é’ˆæ‰€æŒ‡å‘çš„å†…å®¹æ˜¯ä¸€ä¸ªæ•°ç»„,ç„¶åå†ä¸int ç»“åˆ,è¯´æ˜æ•°ç»„é‡Œçš„å…ƒç´ æ˜¯æ•´å‹çš„.æ‰€ä»¥P æ˜¯ä¸€ä¸ªæŒ‡å‘ç”±æ•´å‹æ•°æ®ç»„æˆçš„æ•°ç»„çš„æŒ‡é’ˆ  
int **p; //é¦–å…ˆä»P å¼€å§‹,å…ˆä¸*ç»“åˆ,è¯´æ˜¯P æ˜¯ä¸€ä¸ªæŒ‡é’ˆ,ç„¶åå†ä¸*ç»“åˆ,è¯´æ˜æŒ‡é’ˆæ‰€æŒ‡å‘çš„å…ƒç´ æ˜¯æŒ‡é’ˆ,ç„¶åå†ä¸int ç»“åˆ,è¯´æ˜è¯¥æŒ‡é’ˆæ‰€æŒ‡å‘çš„å…ƒç´ æ˜¯æ•´å‹æ•°æ®.ç”±äºäºŒçº§æŒ‡é’ˆä»¥åŠæ›´é«˜çº§çš„æŒ‡é’ˆæå°‘ç”¨åœ¨å¤æ‚çš„ç±»å‹ä¸­,æ‰€ä»¥åé¢æ›´å¤æ‚çš„ç±»å‹æˆ‘ä»¬å°±ä¸è€ƒè™‘å¤šçº§æŒ‡é’ˆäº†,æœ€å¤šåªè€ƒè™‘ä¸€çº§æŒ‡é’ˆ.  
int p(int); //ä»P å¤„èµ·,å…ˆä¸()ç»“åˆ,è¯´æ˜P æ˜¯ä¸€ä¸ªå‡½æ•°,ç„¶åè¿›å…¥()é‡Œåˆ†æ,è¯´æ˜è¯¥å‡½æ•°æœ‰ä¸€ä¸ªæ•´å‹å˜é‡çš„å‚æ•°,ç„¶åå†ä¸å¤–é¢çš„int ç»“åˆ,è¯´æ˜å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæ•´å‹æ•°æ®  
int (*p)(int); //ä»P å¤„å¼€å§‹,å…ˆä¸æŒ‡é’ˆç»“åˆ,è¯´æ˜P æ˜¯ä¸€ä¸ªæŒ‡é’ˆ,ç„¶åä¸()ç»“åˆ,è¯´æ˜æŒ‡é’ˆæŒ‡å‘çš„æ˜¯ä¸€ä¸ªå‡½æ•°,ç„¶åå†ä¸()é‡Œçš„int ç»“åˆ,è¯´æ˜å‡½æ•°æœ‰ä¸€ä¸ªint å‹çš„å‚æ•°,å†ä¸æœ€å¤–å±‚çš„int ç»“åˆ,è¯´æ˜å‡½æ•°çš„è¿”å›ç±»å‹æ˜¯æ•´å‹,æ‰€ä»¥P æ˜¯ä¸€ä¸ªæŒ‡å‘æœ‰ä¸€ä¸ªæ•´å‹å‚æ•°ä¸”è¿”å›ç±»å‹ä¸ºæ•´å‹çš„å‡½æ•°çš„æŒ‡é’ˆ  
int *(*p(int))[3]; //å¯ä»¥å…ˆè·³è¿‡,ä¸çœ‹è¿™ä¸ªç±»å‹,è¿‡äºå¤æ‚ä»P å¼€å§‹,å…ˆä¸()ç»“åˆ,è¯´æ˜P æ˜¯ä¸€ä¸ªå‡½æ•°,ç„¶åè¿›å…¥()é‡Œé¢,ä¸int ç»“åˆ,è¯´æ˜å‡½æ•°æœ‰ä¸€ä¸ªæ•´å‹å˜é‡å‚æ•°,ç„¶åå†ä¸å¤–é¢çš„*ç»“åˆ,è¯´æ˜å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªæŒ‡é’ˆ,,ç„¶ååˆ°æœ€å¤–é¢ä¸€å±‚,å…ˆä¸[]ç»“åˆ,è¯´æ˜è¿”å›çš„æŒ‡é’ˆæŒ‡å‘çš„æ˜¯ä¸€ä¸ªæ•°ç»„,ç„¶åå†ä¸*ç»“åˆ,è¯´æ˜æ•°ç»„é‡Œçš„å…ƒç´ æ˜¯æŒ‡é’ˆ,ç„¶åå†ä¸int ç»“åˆ,è¯´æ˜æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹æ˜¯æ•´å‹æ•°æ®.æ‰€ä»¥P æ˜¯ä¸€ä¸ªå‚æ•°ä¸ºä¸€ä¸ªæ•´æ•°æ®ä¸”è¿”å›ä¸€ä¸ªæŒ‡å‘ç”±æ•´å‹æŒ‡é’ˆå˜é‡ç»„æˆçš„æ•°ç»„çš„æŒ‡é’ˆå˜é‡çš„å‡½æ•°.
```

## æŒ‡é’ˆåŸºæœ¬æ¦‚å¿µ

æŒ‡é’ˆæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ï¼Œå®ƒé‡Œé¢å­˜å‚¨çš„æ•°å€¼è¢«è§£é‡Šæˆä¸ºå†…å­˜é‡Œçš„ä¸€ä¸ªåœ°å€ã€‚è¦ææ¸…ä¸€ä¸ªæŒ‡é’ˆéœ€è¦ææ¸…æŒ‡é’ˆçš„å››æ–¹é¢çš„å†…å®¹ï¼š**æŒ‡é’ˆçš„ç±»å‹**ã€**æŒ‡é’ˆæ‰€æŒ‡å‘çš„ç±»å‹**ã€**æŒ‡é’ˆçš„å€¼æˆ–è€…å«æŒ‡é’ˆæ‰€æŒ‡å‘çš„å†…å­˜åŒº**ã€**æŒ‡é’ˆæœ¬èº«æ‰€å æ®çš„å†…å­˜åŒº**ã€‚è®©æˆ‘ä»¬åˆ†åˆ«è¯´æ˜ã€‚

å…ˆå£°æ˜å‡ ä¸ªæŒ‡é’ˆæ”¾ç€åšä¾‹å­ï¼š

```
int*ptr; 
char*ptr; 
int**ptr; 
int(*ptr)[3]; 
int*(*ptr)[4];
```

## æŒ‡é’ˆçš„ç±»å‹

ä»è¯­æ³•çš„è§’åº¦çœ‹ï¼Œä½ åªè¦æŠŠæŒ‡é’ˆå£°æ˜è¯­å¥é‡Œçš„æŒ‡é’ˆåå­—å»æ‰ï¼Œå‰©ä¸‹çš„éƒ¨åˆ†å°±æ˜¯è¿™ä¸ªæŒ‡é’ˆçš„ç±»å‹ã€‚è¿™æ˜¯æŒ‡é’ˆæœ¬èº«æ‰€å…·æœ‰çš„ç±»å‹ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ä¾‹ä¸€ä¸­å„ä¸ªæŒ‡é’ˆçš„ç±»å‹ï¼š

```c
int*ptr;//æŒ‡é’ˆçš„ç±»å‹æ˜¯int*
char*ptr;//æŒ‡é’ˆçš„ç±»å‹æ˜¯char*
int**ptr;//æŒ‡é’ˆçš„ç±»å‹æ˜¯int**
int(*ptr)[3];//æŒ‡é’ˆçš„ç±»å‹æ˜¯int(*)[3]
int*(*ptr)[4];//æŒ‡é’ˆçš„ç±»å‹æ˜¯int*(*)[4]
```

å¤åˆ¶ç²˜è´´å¾ˆç´¯ï¼Œ è¿˜æ˜¯ç›´æ¥å»åŸç½‘ç«™çœ‹å§[Cè¯­è¨€æŒ‡é’ˆè¯¦è§£(ç»å…¸,éå¸¸è¯¦ç»†)](https://blog.csdn.net/constantin_/article/details/79575638)

# C,C++çš„ç‰ˆæœ¬

## Cçš„ç‰ˆæœ¬

cçš„ç‰ˆæœ¬å†å², ANSI C(1989) ->= C98/C90(1990) -> C99(1999) -> C11(2011) ï¼Œ [ä¸åŒç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚](https://blog.csdn.net/ZCShouCSDN/article/details/60588496)

## C++çš„ç‰ˆæœ¬

1998  C++98, 2003  C++03, 2011  C++11, 2014  C++14, 2017  C++17, ~~2020  C++20~~ [C++ å‘å±•æ¦‚è¿°](https://blog.csdn.net/K346K346/article/details/80733679 )

# å±€éƒ¨ä¼šå±è”½å…¨å±€, å¦‚ä½•ä½¿ç”¨å…¨å±€å˜é‡ï¼Ÿ

c++ä¸­å¯ä»¥åœ¨å˜é‡åå‰åŠ `::`(Scope resolution operator), **cä¸­æ€ä¹ˆåŠï¼Ÿå¾…è€ƒè¯ï¼Œ**ä¸è¿‡è¿™ç§æ–¹å¼ä»£ç åº”è¯¥æ¯”è¾ƒå®¹æ˜“å‡ºé”™

# typedef versus #define in C

- \#define will just **copy-paste the definition values at the point of use**, while typedef is actual definition of a **new type**.

- typedef follows the scope rule which means if a new type is defined in a scope (inside a function), then the new type name will only be visible till the scope is there. In case of #define, when preprocessor encounters #define, it replaces all the occurrences, after that (No scope rule is followed).

  ```c
  // C program to demonstrate importance 
  // of typedef over #define for data types 
  #include <stdio.h> 
  typedefchar * ptr; 
  #define PTR char* 
  intmain() 
  { 
      ptr a, b, c; 
      PTR x, y, z; 
      printf("sizeof a:%u\n", sizeof (a) ); 
      printf("sizeof b:%u\n", sizeof (b) ); 
      printf("sizeof c:%u\n", sizeof (c) ); 
      printf("sizeof x:%u\n", sizeof (x) ); 
      printf("sizeof y:%u\n", sizeof (y) ); 
      printf("sizeof z:%u\n", sizeof (z) ); 
      return0; 
  } 
  ```

# Linux c stack &  heap

stack & heapï¼Œ ç»å¸¸è¿åœ¨ä¸€èµ·è¯´ï¼Œ ä½†æ˜¯å †å’Œæ ˆåˆ†åˆ«æ˜¯ä¸åŒçš„ä¸œè¥¿ã€‚

[Memory Layout of C Programs](https://www.geeksforgeeks.org/memory-layout-of-c-program/)

[ç¨‹åºå†…å­˜ç®¡ç†](https://hit-alibaba.github.io/interview/basic/arch/Memory-Management.html)

## Stack

æ ˆæ˜¯ä¸€ç§åŠ¨æ€é›†åˆï¼Œå®ƒæ˜¯ä¸€ç§LIFOï¼ˆlast in first outåè¿›å…ˆå‡ºï¼‰ç»“æ„ï¼Œ æ ˆçš„å¤§å°ä¸€èˆ¬éƒ½ä¸å¤§ï¼Œ å¯ä»¥å°è¯•è®¾ç½®æˆ–è·å–stackçš„å¤§å°ã€‚[getrlimit, setrlimit, prlimit - get/set resource limits](http://man7.org/linux/man-pages/man2/getrlimit.2.html)

Stack, where automatic variables are stored, along with information that is saved each time a function is called. Four storage classes:**auto**(mostly used), **static**, **extern**, **register** [Storage Classes in C](https://www.geeksforgeeks.org/storage-classes-in-c/) 

## Heap

å †å®é™…ä¸Šæ˜¯ä»¥æ•°ç»„å½¢å¼å­˜å‚¨çš„äºŒå‰æ ‘

Heap is the segment where dynamic memory allocation usually takes place.

stack overflow: å‡½æ•°é€’å½’è°ƒç”¨å±‚æ¬¡å¤ªæ·±(é€’å½’æ¡ä»¶ä¸å¯¹æ— æ³•è¿”å›)æˆ–ç”³è¯·çš„å†…å­˜æ•°é‡å¤ªå¤š

heap ocerflow: ç”³è¯·çš„å†…å­˜å¤ªå¤§æˆ–è€…ç”³è¯·çš„å†…å­˜æœªåŠæ—¶å¾—åˆ°é‡Šæ”¾(memory leak)

# why does the storage class of global variable  be defined as 'extern'

**å›ç­”è¿˜æ²¡çœ‹æ˜ç™½**ï¼Œ[Why is the storage class of global variables in C implicitly defined as â€œexternâ€?](https://stackoverflow.com/questions/42361320/why-is-the-storage-class-of-global-variables-in-c-implicitly-defined-as-extern)

[About Tentative definition](https://stackoverflow.com/questions/3095861/about-tentative-definition)

# å…³äºå­—ç¬¦ä¸²å¸¸é‡æŒ‡é’ˆ

    char *t = "ABCD";
    printf("t is %s, %p\n", t, t);
    t[0] = 'E';
    printf("t is %s, %p\n", t, t);
tæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œç›´æ¥æŒ‡å‘å¸¸é‡åŒºï¼Œä¿®æ”¹t[0]å°±æ˜¯ä¿®æ”¹å¸¸é‡åŒºçš„å†…å®¹ï¼Œè¿™æ˜¯ä¸å…è®¸çš„

# Readlist

- undeclared vs undefined: å£°æ˜å’Œå®šä¹‰ï¼Œ [è¦å†é˜…è¯»ï¼Œ ä»ç¼–è¯‘å™¨è§’åº¦ä»”ç»†ç†è§£ä¸‹](https://www.zhihu.com/question/27639400)

- [C++ä¸­æŒ‡é’ˆå’Œå¼•ç”¨çš„åŒºåˆ«](https://www.cnblogs.com/dolphin0520/archive/2011/04/03/2004869.html)

- æ€è€ƒä¸ºä»€ä¹ˆå®é™…ç¡çœ æ—¶é—´æ¯”è®¾æƒ³è¦å°ä¸€äº›çš„åŸå› (ç¨‹åºæœªèƒ½åŠæ—¶ä»ç¡çœ çŠ¶æ€è¿‡åº¦åˆ°å°±ç»ªçŠ¶æ€åæœªèƒ½è·å–åˆ°æ—¶é—´ç‰‡)ï¼Œ [sleep,nanosleepä»¥åŠclock_nanosleepå‡½æ•°](https://www.cnblogs.com/U201013687/p/5540539.html)

- cçš„ç‰ˆæœ¬å†å², ANSI C(1989) ->= C98/C90(1990) -> C99(1999) -> C11(2011) ï¼Œ [ä¸åŒç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚](https://blog.csdn.net/ZCShouCSDN/article/details/60588496)

- é‡å…¥ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œå¼‚æ­¥ä¿¡å·å®‰å…¨ï¼Œä¸­æ–­å®‰å…¨å’Œå–æ¶ˆå®‰å…¨ï¼Œ [reentrancy, thread safe, asynchronous signal safe, interrupt safe and cancellation safe](https://sites.google.com/site/embeddedmonologue/home/c-programming/reentrancy-thread-safe-asynchronous-signal-safe-interrupt-safe-and-cancellation-safe)ï¼Œæ³¨æ„å¯é‡å…¥(ä¸€æ¬¡æ‰§è¡Œæœªå®Œæˆå‰å†æ¬¡è°ƒç”¨)å’Œå¹‚ç­‰ï¼ˆå¹‚ç­‰çŸ©é˜µ,idempotent matrix, AA=Aï¼‰ä¸åŒ, ä¸šåŠ¡ä¸Šçš„è§£é‡Šå¯é˜…è¯»[è°ˆè°ˆwebç³»ç»Ÿä¸­çš„å¯é‡å…¥ï¼Œå¹‚ç­‰æ€§ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡çš„é‚£äº›äº‹](https://yuerblog.cc/2016/08/12/talking-about-reentrant-idempotent-distributed-transactions-in-web-systems-1/)

- [å…³äºC++ const çš„å…¨é¢æ€»ç»“](https://blog.csdn.net/Eric_Jo/article/details/4138548)

- [Returning C string from a function](https://stackoverflow.com/questions/1496313/returning-c-string-from-a-function)

- [å¯¹å†…å­˜é‡å çš„æ·±å…¥è®¤è¯†](https://blog.csdn.net/feitianxuxue/article/details/7195158)

- [Linux-é™æ€é“¾æ¥åº“å’ŒåŠ¨æ€é“¾æ¥åº“](https://blog.51cto.com/watchmen/1936668)

- [Cè¯­è¨€åœ¨å­å‡½æ•°ä¸­è°ƒç”¨mallocç”³è¯·å†…å­˜çš„æ–¹æ³•](https://blog.csdn.net/HuffieWang/article/details/51744043)

- [C++ å€¼ä¼ é€’ã€æŒ‡é’ˆä¼ é€’ã€å¼•ç”¨ä¼ é€’è¯¦è§£](https://www.cnblogs.com/yanlingyin/archive/2011/12/07/2278961.html)

  

