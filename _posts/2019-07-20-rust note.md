---
layout:     		post
title:      		   Rust Notes & Tips 
categories: 	      Rust
description:   		Rustå­¦ä¹ æ€»ç»“
keywords: 		  Rust
topmost: true
---

ç²¾é€šxè¯­è¨€ï¼Œ ç²¾é€šrustðŸ˜‚(æœ€åŽæ›´æ–°äºŽ20200624)

# å¼€å‘çŽ¯å¢ƒæ­å»º

- ä»Ž[Rust Forge, Other Rust Installation Methods, Other ways to install `rustup`](https://forge.rust-lang.org/other-installation-methods.html)ä¸Šé€‰æ‹©[x86\_64-unknown-linux-gnu](https://static.rust-lang.org/rustup/dist/x86_64-unknown-linux-gnu/rustup-init) ä¸‹è½½åŽèµ‹æƒæ‰§è¡Œ`rustup-init`ï¼ˆä¸è¦ä½¿ç”¨rustå•ç‹¬å®‰è£…ï¼Œ å¦åˆ™rustupæ— æ³•å•ç‹¬å®‰è£…ï¼Œ è¦ä½¿ç”¨æ—¶ä»éœ€å¸è½½rustè¿›è¡Œé‡è£…ï¼‰

- ä¸­å›½é•œåƒåŠçŽ¯å¢ƒè®¾ç½®ï¼šå‚è€ƒ[å¦‚ä½•åˆ©ç”¨ç§‘å¤§æºæé€ŸCargoå’ŒRust](https://blog.csdn.net/xiangxianghehe/article/details/53471936)

- `rust-crates registry.index will be removed`ç¼–è¯‘warningé—®é¢˜å¯å‚è€ƒhttps://lug.ustc.edu.cn/wiki/mirrors/help/rust-cratesåšå¦‚ä¸‹è®¾ç½®ï¼ˆä¸Šä¸€ç¯‡æ–‡æ¡£ä¿¡æ¯å¯èƒ½è€äº†ï¼‰

  æ›´æ”¹ $HOME/.cargo/config ä¸ºä»¥ä¸‹å†…å®¹:

  ```
  [source.crates-io]
  registry = "https://github.com/rust-lang/crates.io-index"
  replace-with = 'ustc'
  [source.ustc]
  registry = "git://mirrors.ustc.edu.cn/crates.io-index"
  ```

- cargo new hello_world --bin

- rust code formater: `rustup component add rustfmt`   `cargo fmt --all`

- use offline documentï¼š `rustup doc --std`

- `cargo fmt & cargo run` (do format in background )

- cargo new helloworld  --bin

# æ€»ç»“

## default data type`f64`/`i32`

## functions

```rust
fn by_ref(x: &i32) -> f64 { *x + 1;return 1.0;
}
```

reference & deference

## let var: () =

If you are curious about the actual types of these variables, here is a useful trick. Just declare a variable with an explicit type which you know will be wrong:

# Error

- è‡ªå·±æŠŠ `use std::f64::consts;`å†™æˆäº†`using std::f64::consts;`ç¼–è¯‘å™¨çš„æŠ¥é”™æ˜¯

  ```rust
  error: expected one of `!` or `::`, found `std`
   --> src/main.rs:1:7
    |
  1 | using std::f64::consts;
    |       ^
  ^^ expected one of ! or :: here
  ```

  ç›´æŽ¥Googleä¹Ÿæ²¡æ‰¾åˆ°ï¼Œ åŽæ¥è¿˜æ˜¯çœ‹æ–‡æ¡£æ‰å‘çŽ°
  
  

# Readlist

- [rust keywords](https://doc.rust-lang.org/reference/keywords.html)
- [Why does the println! function use an exclamation mark in Rust?](https://stackoverflow.com/questions/29611387/why-does-the-println-function-use-an-exclamation-mark-in-rust)
- [What is this unwrap thing: sometimes it's unwrap sometimes it's unwrap_or](https://stackoverflow.com/questions/21257686/what-is-this-unwrap-thing-sometimes-its-unwrap-sometimes-its-unwrap-or)
- [Some and None, what are they?](https://stackoverflow.com/questions/24771655/some-and-none-what-are-they)
- [åœ¨ Rust ä¸­ï¼Œ`å˜é‡å` æ˜¯å¯ä»¥é‡å¤åˆ©ç”¨çš„ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º é‡å½±ï¼ˆShadowingï¼‰](https://blog.csdn.net/qq_33033813/article/details/105686793)
- [ä»ŽRustçœ‹çŽ°ä»£ç¼–ç¨‹è¯­è¨€å†…å­˜ç®¡ç†æ–°æ€è·¯ï¼ˆäºŒï¼‰](https://sq.163yun.com/blog/article/187373925865111552)
- [Specifying Dependencies](https://doc.rust-lang.org/cargo/reference/specifying-dependencies.html#specifying-dependencies) å¦‚ä½•æ·»åŠ ä¾èµ–çœ‹è¿™é‡Œ https://crates.io/

# Reference

- [Rust for Linuxï¼Œ Rustä¸­æ–‡ç¤¾åŒº](http://wiki.jikexueyuan.com/project/rust-primer/install/install_rust_on_linux.html)

- [Compile time function execution](https://en.wikipedia.org/wiki/Compile_time_function_execution)

- [Zero Sized Types (ZSTs)](https://doc.rust-lang.org/nomicon/exotic-sizes.html#zero-sized-types-zsts)

- [https://stevedonovan.github.io/rust-gentle-intro/1-basics.html](https://stevedonovan.github.io/rust-gentle-intro/1-basics.html)

  - panic, segfault, garbage collection 

    > The first C program I wrote (on an DOS PC) took out the whole computer. Unix systems always behaved better, and only the process died with a ***segfault***. Why is this worse than a Rust (or Go) program panicking? Because a panic happens when the original problem happens, not when the program has become hopelessly confused and eaten all your homework. **Panics are *memory safe*because they happen before any illegal access to memory. This is a common cause of security problems in C, because all memory accesses are unsafe and a cunning attacker can exploit this weakness.**
    >
    > Panicking sounds desperate and unplanned, but Rust panics are structured - the stack is *unwound*just as with exceptions. All allocated objects are dropped, and a backtrace is generated.
    >
    > **The downsides of garbage collection**? The first is that it is wasteful of memory, which matters in those small embedded microchips which increasingly rule our world. The second is that it will decide, at the worst possible time, that a clean up must happen *now*. (The Mom analogy is that she wants to clean your room when you are at a delicate stage with a new lover). Those embedded systems need to respond to things *when they happen* ('real-time') and can't tolerate unscheduled outbreaks of cleaning. Roberto Ierusalimschy, the chief designer of Lua (one of the most elegant dynamic languages ever) said that he would not like to fly on an airplane that relied on garbage-collected software.

  - iterate over an array

    > In fact, it is more efficient to iterate over an array or slice this way than to use `for i in 0..slice.len() {}` because Rust does not have to obsessively check every index operation.

