---
layout:     	post
title:      	Java Notes and Tips(new)
categories: 	OO
description:   	JavaçŸ¥è¯†ç‚¹å’Œæ€»ç»“
keywords: 		Java
---

JavaçŸ¥è¯†ç‚¹å’Œæ€»ç»“ (update@20201024)

# Javaç¯å¢ƒæ­å»º

## å¯ä»¥ä½¿ç”¨çš„ideaæ’ä»¶

æ’ä»¶æ— æ³•é€šè¿‡ideaç›´æ¥å®‰è£…æ—¶ï¼Œ å¯å»[plugins.jetbrains.com](https://plugins.jetbrains.com/)ä¸‹è½½åˆ°æœ¬åœ°åå†æ‰‹åŠ¨å®‰è£…ã€‚

### lombok

#### å¼•å…¥mavenåŒ…ï¼ˆå¼•å…¥å¤±è´¥é—®é¢˜ï¼‰

```xml
<dependency>
  <groupId>org.projectlombok</groupId>
  <artifactId>lombok</artifactId>
  <version>1.16.18</version>
  <scope>provided</scope>
</dependency>
```

å“ˆå“ˆä¹‹å‰ä¸€ç›´å¯¼å…¥å¤±è´¥ï¼Œ è¿˜ä»¥ä¸ºæ˜¯è‡ªå·±æ‰‹åŠ¨è£…çš„lombokæ’ä»¶æ²¡è£…å¥½ï¼Œ æŒ‰ç…§[Javaæ•ˆç‡å·¥å…·ä¹‹Lombok](https://juejin.im/post/5b00517cf265da0ba0636d4b)ç»™çš„dependencyï¼ˆå’Œæˆ‘åŸæ¥ç›¸æ¯”å¤šäº†ç‰ˆæœ¬å·ï¼Œ [maven dependency without version](https://stackoverflow.com/questions/29476472/maven-dependency-without-version)ï¼‰

### alibaba guidelinesï¼ˆalibaba ä»£ç æ£€æŸ¥ï¼‰

### free mybaits plugin

## å…¶ä»–å·¥å…·

 mybatisé€†å‘ç”Ÿæˆå·¥å…·:[Spring-generator]( https://github.com/EliMirren/Spring-generator.git)

## IDEAæ— æ³•å¯åŠ¨

ä¸€èˆ¬éƒ½æ˜¯æ”¹äº†jvmå†…å­˜å¯¼è‡´çš„ï¼Œç›´æ¥åˆ é™¤ç”¨æˆ·ç›®å½•ä¸‹.IdeaIC2019.3\configçš„vmoptionsæ–‡ä»¶å³å¯

## IDEAä»£ç è‡ªåŠ¨æç¤ºä¸è¡¥å…¨åŠŸèƒ½æ¶ˆå¤±

ç½‘ä¸Šå¾ˆå¤šèµ„æ–™è¯´çš„æ˜¯å¼€å¯äº†çœç”µæ¨¡å¼ï¼Œä½†æ˜¯æˆ‘çš„çŠ¶å†µæ˜¯pom.xmlæ–‡ä»¶æœªè¢«å¼•å…¥mavenç®¡ç†ï¼Œå¯ä»¥çœ‹åˆ°æ–‡ä»¶çš„å›¾æ ‡é¢œè‰²å·²ç»å‘ç”Ÿäº†å˜åŒ–

# æµ®ç‚¹æ•°åˆ°æ•´æ•°çš„è½¬æ¢

æµ®ç‚¹æ•°åˆ°æ•´æ•°çš„è½¬æ¢æ˜¯é€šè¿‡èˆå¼ƒå°æ•°å¾—åˆ°ï¼Œè€Œä¸æ˜¯å››èˆäº”å…¥ï¼Œä¾‹å¦‚ï¼š

```java
    (int)23.7 == 23;        (int)-45.89f == -45
```

è¿™ä¸€ç‚¹å’ŒCçš„æ˜¯ä¸åŒçš„

# Javaçš„æ ‡è¯†ç¬¦è§„åˆ™

Javaçš„æ ‡è¯†ç¬¦å’ŒCçš„ä¸€æ ·éƒ½æ˜¯ç¾å…ƒç¬¦ï¼ˆ$ï¼‰å¼€å§‹çš„ï¼Œ è¿™ä¸ªCå’ŒJAVAæˆ‘éƒ½æ²¡è®°å¾—å¯ä»¥è¿™æ ·ç”¨

# Javaä¸­çš„null

- java ä¸­string å’Œnullç›¸åŠ ,         

    ```java
     String nstr;  String str1 = "hello" + nstr; String str2 = "world" + null;
    ```

    ç»“æœä¼šå˜æˆ `hellonull`, `worldnull`
    
- javaä¸­åˆ¤æ–­æŸä¸ªæŸä¸ª`String`å¯¹è±¡æ˜¯å¦æ˜¯`null`æˆ–è€…ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œ éœ€è¦å…ˆåˆ¤æ–­æ˜¯å¦ä¸º`null`ï¼Œ é¡ºåºä¸èƒ½è°ƒæ¢

    ```java
    if(str != null && !str.equals("")){}
    ```

# é‡è½½overload vs. é‡å†™override

- é‡è½½overloadï¼ˆå®ç°ä¸åŒå‚æ•°åˆ—è¡¨çš„åŒåæ–¹æ³•ï¼‰
- é‡å†™override(é‡æ–°å®ç°åŒåæ–¹æ³•çš„å†…å®¹ï¼Œ å‚æ•°åˆ—è¡¨ï¼Œè¿”å›å€¼éƒ½ç›¸åŒï¼Œ ä»…æ–¹æ³•å†…å®¹å³æ–¹æ³•ä½“ä¸åŒ)

# Javaç±»çš„åŠ è½½é¡ºåº

â€‹	javaç±»çš„åŠ è½½é¡ºåº: **çˆ¶ç±»staticä»£ç å—ï¼Œæ–¹æ³•** â€“> **å­ç±»staticä»£ç å—ï¼Œæ–¹æ³•** â€“> **çˆ¶ç±»æ„é€ æ–¹æ³•**- -> **å­ç±»æ„é€ æ–¹æ³•** 

â€‹	æ‰€ä»¥javaä¸­é™æ€ä»£ç å—ï¼Œ æ–¹æ³•(static  context)ä¸èƒ½ä½¿ç”¨éé™æ€æ–¹æ³•ï¼ˆnon static method or Objectï¼‰

# Spring Beanåç§°é‡å¤ConflictingBeanDefinitionExceptionè§£å†³

æœ€è¿‘å¤šæ¬¡é‡åˆ°è¿‡è¿™ä¸ªé—®é¢˜ï¼Œ è™½ç„¶åŸå› å·²ç»çŸ¥æ™“ï¼Œä½†æ˜¯åŸç†è¿˜ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œ æœ‰ç©ºå†æ¥æ·±å…¥ç†è§£ä¸‹ï¼Œ[Spring Beanåç§°é‡å¤ConflictingBeanDefinitionExceptionè§£å†³](https://www.jianshu.com/p/74c801fd70f4)

# è®°ä¸€æ¬¡å›°æ‰°è‡ªå·±3å¤©çš„åºåˆ—åŒ–å¶å‘é—®é¢˜

å…¥æ‰‹å…¬å¸çš„æ–°æ¶æ„ï¼Œ å†™äº†ä¸ªæœåŠ¡ï¼Œéƒ¨ç½²åˆ°å¼€å‘æµ‹è¯•ç¯å¢ƒä¹‹åï¼Œ æ€»æ˜¯å‘ç°å®¢æˆ·ç«¯è°ƒç”¨æœåŠ¡æ—¶æœ‰é‡åˆ°åºåˆ—è¯é—®é¢˜ï¼Œ `com.esotericsoftware.kryo.KryoException: Encountered unregistered class, Serialization trace:`ç™¾åº¦åæœ‰çœ‹åˆ°è¯´æ˜¯å¯¹è±¡å¤ªå¤§ï¼Œäºæ˜¯ç²¾ç®€åä¹Ÿè¿˜æ˜¯é‡åˆ°äº†ç›¸åŒçš„çŠ¶å†µï¼Œ åæ¥è¯·æ•™äº†åŒäº‹åå‘ç°æ˜¯è‡ªå·±æœåŠ¡æœ‰åšè¿‡è¿ç§»ï¼Œ è€çš„æœåŠ¡å†è‡ªå·±æ–°æœåŠ¡VOå¯¹è±¡æœ‰æ”¹åŠ¨çš„æƒ…å†µä¸‹æ²¡æœ‰é‡æ–°éƒ¨ç½²è¿‡ï¼Œå¯¼è‡´æœåŠ¡åœ¨è¯·æ±‚åˆ°2ä¸ªæ–°æœåŠ¡çš„æä¾›è€…ä¹‹å¤–çš„å¦ä¸€æœåŠ¡æ—¶å°±ä¼šé‡åˆ°é—®é¢˜ï¼ˆè¿™é‡Œè‡ªå·±è¦æ£€è®¨ä¸ºä»€ä¹ˆè‡ªå·±ä¸å»å…³æ³¨è‡ªå·±çš„è¯·æ±‚åœ¨ä¸¤å°æœºå™¨çš„logé‡Œéƒ½æ²¡æ‰¾åˆ°ï¼‰ï¼Œ åŒäº‹å½“æ—¶ç”¨äº†å‘½ä»¤æŸ¥çœ‹åˆ°æœåŠ¡æ­¤æ—¶æœ‰3ä¸ªæä¾›è€…è€Œä¸æ˜¯ä¸¤ä¸ªï¼Œç”¨çš„å‘½ä»¤å¯ä»¥å‚è€ƒ[zookeeperå®¢æˆ·ç«¯å‘½ä»¤è¡ŒæŸ¥çœ‹dubboæœåŠ¡çš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…](https://blog.csdn.net/alinshen/article/details/79568280)

# System.exit(0)é—®é¢˜

åœ¨å‚è€ƒåˆ«äººçš„ä»£ç æ—¶ï¼Œ ä¹Ÿéšæ‰‹å­¦åˆ«äººå†™äº†ä¸ª`System.exit(0)`ï¼Œ ä½†æ˜¯å®é™…ä¸Šè¿™ä¸ªä¼šåœæ‰æ•´ä¸ªè¿›ç¨‹åœ¨ä½¿ç”¨çš„è™šæ‹Ÿæœºï¼Œ åæœå¾ˆä¸¥é‡ğŸ˜‚

# ThreadLocal

## ThreadLocal vs. Synchronized

ThreadLocalå’ŒSynchronizedéƒ½æ˜¯ä¸ºäº†è§£å†³å¤šçº¿ç¨‹ä¸­ç›¸åŒå˜é‡çš„è®¿é—®å†²çªé—®é¢˜ï¼Œä¸åŒçš„ç‚¹[[ingxinç®€ä¹¦ThreadLocal](https://www.jianshu.com/p/3c5d7f09dfbd)

- Synchronizedæ˜¯é€šè¿‡çº¿ç¨‹ç­‰å¾…ï¼Œç‰ºç‰²æ—¶é—´æ¥è§£å†³è®¿é—®å†²çª
- ThreadLocalæ˜¯é€šè¿‡æ¯ä¸ªçº¿ç¨‹å•ç‹¬ä¸€ä»½å­˜å‚¨ç©ºé—´ï¼Œç‰ºç‰²ç©ºé—´æ¥è§£å†³å†²çªï¼Œå¹¶ä¸”ç›¸æ¯”äºSynchronizedï¼ŒThreadLocalå…·æœ‰çº¿ç¨‹éš”ç¦»çš„æ•ˆæœï¼Œåªæœ‰åœ¨çº¿ç¨‹å†…æ‰èƒ½è·å–åˆ°å¯¹åº”çš„å€¼ï¼Œçº¿ç¨‹å¤–åˆ™ä¸èƒ½è®¿é—®åˆ°æƒ³è¦çš„å€¼ã€‚

## è®°threadlocalå¼•å‘çš„ä¸€ä¸ªé—®é¢˜

â€‹       ä½¿ç”¨threadlocalæ—¶ä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨å…¨å±€é™æ€å˜é‡ï¼Œåœ¨èµ‹å€¼å’Œä½¿ç”¨æ—¶ä¸€å®šè¦å°å¿ƒã€‚ï¼ˆè‡ªå·±å†™è¿‡ä¸€ä¸ªçº¿ä¸Šbugï¼ŒåŒæ´»æœºå™¨æ¯å°ç¬¬ä¸€æ¬¡è¯·æ±‚æ•°æ®æ—¶ä¼šå…ˆåˆ†åˆ«è®¾ç½®ä¸åŒçš„DBè·¯å¾„ï¼Œå»æå–å¿…é¡»æ•°æ®ï¼Œå†è¿›è¡Œåç»­æŸ¥è¯¢ï¼Œç»“æœDBè·¯å¾„å°±é”™è¯¯çš„å˜æˆäº†æœ€åä¸€æ¬¡çš„DBè·¯å¾„ï¼‰

# Javaä¼ å€¼è¿˜æ˜¯å¼•ç”¨

å…ˆå ä¸ªå‘ï¼Œä»¥åå†ä»”ç»†å»ç ”ç©¶å®ç°æœºåˆ¶ä»¥åŠå’ŒC++çš„åŒºåˆ«ï¼Œç°åœ¨æˆ‘çš„ç†è§£æ˜¯javaæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¼•ç”¨ï¼Œ è¯¥å¼•ç”¨å¯ä»¥é‡æ–°æŒ‡å‘åˆ«çš„åœ°å€ï¼ˆä¸€æ—¦æŒ‡å‘åˆ«çš„åœ°å€ï¼Œå°±è·ŸåŸæœ‰æŒ‡å‘çš„å†…å®¹æ— å…³ï¼‰ï¼Œ å¯ä»¥ä½¿ç”¨ä¸€ä¸‹çš„ä»£ç è¿›è¡Œæµ‹è¯•



```java
class TestClass {
    public String a;
    public String b;

}

 static void testFunc(TestClass t) {
        t.a = "hello";
        t.b = "world";
        System.out.println(t.hashCode());
        TestClass s = new TestClass();
        System.out.println(s.hashCode());
        s.a = "test";
        s.b = "java";
        t = s;
        System.out.println(t.hashCode());
    }

public static void main(String[] args) throws Exception {
    TestClass t = new TestClass();
    System.out.println(t.hashCode());
    testFunc(t);
    System.out.println(t.a + "," + t.b);
    System.out.println(t.hashCode());
}
```


# Readlist

- [ä¸ºä»€ä¹ˆå‡½æ•°ä¸èƒ½æ ¹æ®è¿”å›ç±»å‹æ¥åŒºåˆ†é‡è½½ï¼Ÿ](https://blog.csdn.net/chang384915878/article/details/79535416), è¿™ä¸ªè‡ªå·±ä¸€ç›´æœ‰è¯¯è§£ï¼Œ C++, Javaéƒ½è¦æ³¨æ„

- [Javaçº¿ç¨‹åŒæ­¥ï¼šsynchronizedé”ä½çš„æ˜¯ä»£ç è¿˜æ˜¯å¯¹è±¡](https://blog.csdn.net/xiao__gui/article/details/8188833)

- [@Synchronized `synchronized` done right: Don't expose your locks.](https://projectlombok.org/features/Synchronized)

- [lombokæ³¨è§£ä»‹ç»](https://blog.csdn.net/sunsfan/article/details/53542374)

- [JVMç³»åˆ—ä¸‰:JVMå‚æ•°è®¾ç½®ã€åˆ†æ](https://www.cnblogs.com/redcreen/archive/2011/05/04/2037057.html)

- [scheduleAtFixedRate vs scheduleWithFixedDelay](https://stackoverflow.com/questions/24649842/scheduleatfixedrate-vs-schedulewithfixeddelay)

- [scheduleAtFixedRate ä¸ scheduleWithFixedDelay çš„åŒºåˆ«](https://blog.csdn.net/is_zhoufeng/article/details/8531037)

- [Dubbo-Fail to decode request due to: RpcInvocation](https://blog.csdn.net/u011450110/article/details/77716037)

- [Checked vs Unchecked Exceptions in Java](https://www.geeksforgeeks.org/checked-vs-unchecked-exceptions-in-java/)

- [log4jæ—¥å¿—æ–‡ä»¶åœ¨java+mavenå·¥ç¨‹ä¸­çš„ä½¿ç”¨](https://blog.csdn.net/u012922706/article/details/76885654?utm_source=blogxgwz4)

- [Arthas - Java çº¿ä¸Šé—®é¢˜å®šä½å¤„ç†çš„ç»ˆæåˆ©å™¨](https://blog.csdn.net/u013735734/article/details/102930307)

- [javaå¼‚å¸¸8ï¼šfinallyå…³é”®å­—çš„ç‰¹ç‚¹åŠä½œç”¨](https://blog.csdn.net/yuming226/article/details/83444570)

- [javaä¸­çš„mapé›†åˆå­˜æ”¾nullå€¼æ€»ç»“](https://blog.csdn.net/fenglongmiao/article/details/79561466)

- çº¿ç¨‹å®‰å…¨ vs  çº¿ç¨‹å±€éƒ¨å®‰å…¨

- [Javaå¯¹è±¡å ç”¨å†…å­˜ç©ºé—´åˆ†æåŠå®æˆ˜](https://www.jianshu.com/p/40faea07d4d2)

- [java8æ¥å£æ–°ç‰¹æ€§ï¼Œdefaultå…³é”®å­—ï¼Œæ¥å£å¯ä»¥æ‹¥æœ‰æ–¹æ³•ä½“](https://www.cnblogs.com/deptop/p/9150592.html)

- [java ä¸­å˜é‡å­˜å‚¨ä½ç½®çš„åŒºåˆ«](https://blog.csdn.net/yuan22003/article/details/6822221)

- [è¯¦è¿° @Service å’Œ @Resource æ³¨è§£çš„åŒºåˆ«](https://blog.csdn.net/qq_35246620/article/details/59484024)

- [Java JVMè™šæ‹Ÿæœºé€‰é¡¹Xms/Xmx/PermSize/MaxPermSize](https://www.cnblogs.com/EasonJim/p/7490114.html)

- [HashMapåˆå§‹åŒ–æ—¶ä¸ºä»€ä¹ˆå»ºè®®ä½¿ç”¨HashMap(int initialCapacity)æŒ‡å®šé›†åˆå¤§å°](https://blog.csdn.net/old_land/article/details/92997486)

- [SimpleDateFormatçº¿ç¨‹ä¸å®‰å…¨åŸå› åŠè§£å†³æ–¹æ¡ˆ](https://www.cnblogs.com/yangyongjie/p/11017409.html)

- [Javaä¸­çš„é—­åŒ…ä¹‹äº‰](https://sylvanassun.github.io/2017/07/30/2017-07-30-JavaClosure/)

- [Effective Java Item86 - è¬¹æ…å¯¦ç¾Serializableä»‹é¢](https://www.jyt0532.com/2017/09/29/implement-serializable-judiciously/)

- [Effective Java - åºåˆ—åŒ–](https://www.jyt0532.com/2017/09/27/java-serialization-101/)

- [mybatisæŸ¥è¯¢ç¼“å­˜(ä¸€ã€äºŒçº§ç¼“å­˜useCache, flushCache)](https://www.cnblogs.com/lhy-549/p/10087778.html)

- [Error querying database. Cause: java.lang.NumberFormatException: For input string: "å¦"](https://blog.csdn.net/lcl_lq/article/details/51150152)

- [context:component-scanä½¿ç”¨è¯´æ˜](https://blog.csdn.net/vicroad2014/article/details/82115605)

- [è¿˜åœ¨ä½¿ç”¨if elseå†™ä»£ç ï¼Ÿè¯•è¯• â€œç­–ç•¥æ¨¡å¼â€ å§ï¼](https://www.jianshu.com/p/44caa9762c62)

- [How to Avoid Scientific Notation in Double?](https://stackoverflow.com/questions/20813631/how-to-avoid-scientific-notation-in-double)

- [How to work with wait(), notify() and notifyAll() in Java?](https://howtodoinjava.com/java/multi-threading/wait-notify-and-notifyall-methods/)

- [Javaæ’æŸ¥å•é¡Œå·¥å…·ã€å‘½ä»¤ç¸½çµ](https://kknews.cc/news/33jq8jy.html)

- [ç»†èŠ‚çŸ¥å¤šå°‘ - spring @Valueæ³¨è§£è§£æ](https://juejin.im/post/6844903904732266510)

- [springçš„@Valueæ³¨è§£ä½¿ç”¨](https://blog.csdn.net/woheniccc/article/details/79804600)

  

